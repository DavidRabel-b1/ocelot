#!/bin/bash
#
# otime provides day of the week, week number, time, day of month and month
# for the ocelot side-panel
#
#    ^   ^
#  +-------+
#  |  o_O  |
#  |  >.<  |__/
#  +-------+
#
# ocelot by AndrÃ© Klausnitzer, CC0

otime_content=""
get_otime() {
    otime_content="otime:=^pa(0;4) ^fg(#ffffff)$(date '+%a,') ^fg()$(date '+W%-W')\n^p1()\n ^fg(#ffffff)$(date '+%-H:%M')\n^pa(0;0) $(date '+%-d. %b')"
}

ofifo="/tmp/ocollector.fifo$OCELOT_INSTANCE"
while true ; do
    get_otime

    # debug
    # echo "$otime_content"

    echo "$otime_content" > "$ofifo"
    sleep 15
done
